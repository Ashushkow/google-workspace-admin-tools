#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—Å—Ç–∞–≤–∫–∏ –≤ –æ–∫–Ω–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
"""

import sys
import tkinter as tk
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º src –≤ Python path
sys.path.insert(0, str(Path(__file__).parent.parent / 'src'))

def test_document_management_copy_paste():
    """–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—Å—Ç–∞–≤–∫–∏"""
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—Å—Ç–∞–≤–∫–∏ –≤ –æ–∫–Ω–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏...")
    
    # –°–æ–∑–¥–∞–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç-—Å–µ—Ä–≤–∏—Å
    class MockDocumentService:
        def get_document_info(self, url):
            return type('DocumentInfo', (), {
                'name': '–¢–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç',
                'owner': 'test@example.com',
                'url': url
            })()
        
        def get_permissions(self, doc_id):
            return [
                {'email': 'user1@example.com', 'role': 'reader', 'type': 'user'},
                {'email': 'user2@example.com', 'role': 'writer', 'type': 'user'}
            ]
    
    # –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
    root = tk.Tk()
    root.withdraw()  # –°–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
    
    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏ —Å–æ–∑–¥–∞–µ–º –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
    from src.ui.document_management import DocumentManagementWindow
    
    try:
        doc_window = DocumentManagementWindow(
            root, 
            MockDocumentService(),
            "https://docs.google.com/document/d/test123/edit"
        )
        
        print("‚úÖ –û–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ")
        print("‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω—é –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã")
        print("‚úÖ –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (Ctrl+C, Ctrl+V, Ctrl+X, Ctrl+A) –¥–æ–±–∞–≤–ª–µ–Ω—ã")
        print("‚úÖ –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è email –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –¥–æ–±–∞–≤–ª–µ–Ω–∞")
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        print("\nüìã –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:")
        print("1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ –ø–æ–ª–µ URL - –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é")
        print("2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ –ø–æ–ª–µ Email - –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é")
        print("3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+C, Ctrl+V, Ctrl+X –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞")
        print("4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ –∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C –∏–ª–∏ –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º GUI
        root.mainloop()
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–∫–Ω–∞: {e}")
        return False
    
    return True

if __name__ == "__main__":
    success = test_document_management_copy_paste()
    if success:
        print("üéâ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!")
    else:
        print("üí• –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–∞–º–∏")
