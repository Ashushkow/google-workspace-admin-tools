# –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å Secondary Email

## üéØ –£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–ª Gmail –∞–¥—Ä–µ—Å –≤ –ø–æ–ª–µ **"Secondary Email"** –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞, –Ω–æ –ø–æ–ª—É—á–∞–ª –æ—à–∏–±–∫—É "–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è". –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤ –≤ API —Ñ—É–Ω–∫—Ü–∏—è—Ö.

## ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 403 –≤ API

**–§–∞–π–ª:** `src/api/users_api.py`

- ‚úÖ –§—É–Ω–∫—Ü–∏—è `user_exists()` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –¥–æ–º–µ–Ω—ã
- ‚úÖ –û—à–∏–±–∫–∞ 403 –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `False` (–Ω–µ –Ω–∞–π–¥–µ–Ω)
- ‚úÖ Secondary email —Å –ª—é–±—ã–º –¥–æ–º–µ–Ω–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 2. –£–ª—É—á—à–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–§–∞–π–ª:** `src/ui/user_windows.py`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏:**
- üìß Primary Email: "–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–æ–º–µ–Ω–µ @sputnik8.com"
- üí° Secondary Email: "–ú–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π –¥–æ–º–µ–Ω (Gmail, Yahoo –∏ —Ç.–¥.) –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –≤–Ω–µ—à–Ω–∏–π –¥–æ–º–µ–Ω –≤ Primary Email
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- Primary Email –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å @sputnik8.com
- Secondary Email –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º –¥–æ–º–µ–Ω–æ–º
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å Secondary Gmail:**
   ```
   Primary Email: user@sputnik8.com ‚úÖ
   Secondary Email: recovery@gmail.com ‚úÖ
   –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∑ Secondary Email:**
   ```
   Primary Email: user@sputnik8.com ‚úÖ
   Secondary Email: (–ø—É—Å—Ç–æ) ‚úÖ
   –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
   ```

### ‚ùå –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:

1. **Primary Email —Å –≤–Ω–µ—à–Ω–∏–º –¥–æ–º–µ–Ω–æ–º:**
   ```
   Primary Email: user@gmail.com ‚ùå
   –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ UI + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤:**
   ```
   user_exists("test@external-domain.com") ‚Üí False ‚úÖ
   (–í–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏ 403)
   ```

## üéâ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚ùå –û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

**–°–ª—É—á–∞–π 1 - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω: john.doe@sputnik8.com –≤ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏ /
üìß Secondary email: recovery@gmail.com –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```

**–°–ª—É—á–∞–π 2 - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ:**
```
‚ö†Ô∏è Primary Email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–æ–º–µ–Ω–µ @sputnik8.com
   –í—ã —É–∫–∞–∑–∞–ª–∏: user@gmail.com
   –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã —Ö–æ—Ç–µ–ª–∏ —É–∫–∞–∑–∞—Ç—å —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å –∫–∞–∫ Secondary Email?
   [–î–∞] [–ù–µ—Ç]
```

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã:

1. **First Name:** –ò–≤–∞–Ω
2. **Last Name:** –ü–µ—Ç—Ä–æ–≤  
3. **Email:** ivan.petrov@sputnik8.com ‚Üê –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
4. **Secondary Email:** ivan.recovery@gmail.com ‚Üê –õ—é–±–æ–π –¥–æ–º–µ–Ω –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
5. **Password:** SecurePass123!

### üí° –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª–µ–π:

- **Primary Email** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π –∞–¥—Ä–µ—Å –≤ Google Workspace
- **Secondary Email** - –ª–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- **Phone** - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ Secondary Email –≤ API:
```python
# –í user_body –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è:
if secondary_email:
    user_body['emails'] = [{'address': secondary_email, 'type': 'home'}]
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤:
```python
def user_exists(service, email):
    try:
        service.users().get(userKey=email).execute()
        return True
    except HttpError as e:
        if e.resp.status == 403:
            email_domain = email.split('@')[-1]
            if email_domain != workspace_domain:
                return False  # –í–Ω–µ—à–Ω–∏–π –¥–æ–º–µ–Ω - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
            else:
                return None   # –ù–∞—à –¥–æ–º–µ–Ω - –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ Secondary Email —Å Gmail —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ API
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞! üöÄ
