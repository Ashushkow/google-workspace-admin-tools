# üîê OAuth 2.0 Setup Guide –¥–ª—è Google Workspace

> **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**: OAuth 2.0 –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –∏ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Google Cloud Console

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –ù–∞–∂–º–∏—Ç–µ **"Select a project"** ‚Üí **"New Project"**
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: `Admin Team Tools`
4. –ù–∞–∂–º–∏—Ç–µ **"Create"**

#### 1.2 –í–∫–ª—é—á–µ–Ω–∏–µ API
1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **"APIs & Services"** ‚Üí **"Library"**
2. –ù–∞–π–¥–∏—Ç–µ –∏ –≤–∫–ª—é—á–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ API:
   - **Admin SDK API** ‚úÖ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - **Google Calendar API** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **Gmail API** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 1.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth consent screen
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"APIs & Services"** ‚Üí **"OAuth consent screen"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Internal"** (–¥–ª—è G Suite) –∏–ª–∏ **"External"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
   - **App name**: `Admin Team Tools`
   - **User support email**: –≤–∞—à email
   - **Developer contact information**: –≤–∞—à email
4. –ù–∞–∂–º–∏—Ç–µ **"Save and Continue"**

#### 1.4 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Scopes
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **"Scopes"** –Ω–∞–∂–º–∏—Ç–µ **"Add or Remove Scopes"**
2. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ scopes:
   ```
   https://www.googleapis.com/auth/admin.directory.user
   https://www.googleapis.com/auth/admin.directory.group
   https://www.googleapis.com/auth/admin.directory.orgunit
   https://www.googleapis.com/auth/calendar
   ```
3. –ù–∞–∂–º–∏—Ç–µ **"Update"** ‚Üí **"Save and Continue"**

### 2. –°–æ–∑–¥–∞–Ω–∏–µ OAuth 2.0 Credentials

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ Client ID
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"APIs & Services"** ‚Üí **"Credentials"**
2. –ù–∞–∂–º–∏—Ç–µ **"+ Create Credentials"** ‚Üí **"OAuth client ID"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Desktop application"**
4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: `Admin Team Tools Desktop`
5. –ù–∞–∂–º–∏—Ç–µ **"Create"**

#### 2.2 –°–∫–∞—á–∏–≤–∞–Ω–∏–µ credentials
1. –í —Å–ø–∏—Å–∫–µ OAuth 2.0 Client IDs –Ω–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π client
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (‚¨áÔ∏è)
3. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ `credentials.json`
4. –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### 3.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ credentials.json
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```json
{
  "installed": {
    "client_id": "–≤–∞—à-client-id.apps.googleusercontent.com",
    "project_id": "–≤–∞—à-project-id",
    "auth_uri": "https://accounts.google.com/o/oauth2/auth",
    "token_uri": "https://oauth2.googleapis.com/token",
    "client_secret": "–≤–∞—à-client-secret",
    "redirect_uris": ["http://localhost"]
  }
}
```

#### 3.2 –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç OAuth 2.0
python test_oauth.py
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä
2. –í–æ–π–¥–∏—Ç–µ –≤ Google –∞–∫–∫–∞—É–Ω—Ç —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Google Workspace
4. –¢–æ–∫–µ–Ω –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ `token.pickle`

### –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏
- –¢–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `token.pickle`
- –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –§–∞–π–ª—ã –¥–ª—è .gitignore
```
# OAuth 2.0 —Å–µ–∫—Ä–µ—Ç—ã
credentials.json
token.pickle
```

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
OAuth 2.0 –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞:
- **admin.directory.user**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **admin.directory.group**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏  
- **admin.directory.orgunit**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è–º–∏
- **calendar**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "Access blocked"
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∞–∫–∫–∞—É–Ω—Ç —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ Google Workspace

### –û—à–∏–±–∫–∞: "redirect_uri_mismatch"
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ OAuth client –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã redirect URIs: `http://localhost`

### –û—à–∏–±–∫–∞: "insufficient privileges"
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ scopes –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ OAuth consent screen

### –û—à–∏–±–∫–∞: "API not enabled"
**–†–µ—à–µ–Ω–∏–µ**: –í–∫–ª—é—á–∏—Ç–µ Admin SDK API –≤ Google Cloud Console

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π OAuth 2.0:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python test_oauth.py` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ credentials.json –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Google Workspace

---

‚úÖ **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OAuth 2.0 –≤—ã —Å–º–æ–∂–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å Google Workspace —á–µ—Ä–µ–∑ Admin Team Tools!**
